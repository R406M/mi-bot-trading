import os
import json
import logging
import pandas as pd
from flask import Flask, request, jsonify
from kucoin.client import Trade, Market
import threading
from decimal import Decimal
from typing import Optional, Dict, Any
from dataclasses import dataclass
import time
from logging.handlers import RotatingFileHandler

# Configuración de la clase para Trading
@dataclass
class TradingConfig:
    symbol: str = "DOGE-USDT"
    timeframe: str = "5min"
    max_amount: float = 10.0
    tp_value: float = 0.2
    sl_value: float = 10.0
    retry_attempts: int = 3
    retry_delay: int = 1

# Configuración del logging
def setup_logging():
    logger = logging.getLogger(__name__)
    logger.setLevel(logging.INFO)
    
    # Handler para archivo con rotación
    handler = RotatingFileHandler(
        'trading_bot.log',
        maxBytes=1024*1024,  # 1MB
        backupCount=5
    )
    formatter = logging.Formatter('%(asctime)s - %(levelname)s - %(message)s')
    handler.setFormatter
